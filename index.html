<!doctype html>
<html lang="pt-br">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>calculadora.js</title>
  </head>
  <body>

        <div class="container mt-3">
          <h2>CALCULADORA</h2>
          <div class="mt-4 p-5 bg-primary text-white rounded">
                    <div class="container">
                    <div class="row">
                        <div class="col-md-8">
                            <label class="control-label col-md-2">
                                VALOR 1:
                            </label>
                            <div class="col-md-4">
                                <input type="text" class="form-control input-sm text-right amount" value="0" id="val_1"
                                oninput="set_value(this)" placeholder="1° Primeiro valor">
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-8">
                            <label class="control-label col-md-2">
                                VALOR 2:
                            </label>
                            <div class="col-md-4">
                                <input type="text" class="form-control input-sm text-right amount" value="0" id="val_2"
                                oninput="set_value(this)" placeholder="2° Primeiro valor">
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-8">
                            <label class="control-label col-md-2">
                                VALOR 3:
                            </label>
                            <div class="col-md-4">
                                <input type="text" class="form-control input-sm text-right amount" value="0"  id="val_3"
                                oninput="set_value(this)" placeholder="3° Primeiro valor">
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-8">
                            <label class="control-label col-md-2">
                                TOTAL:
                            </label>
                            <div class="col-md-4">
                                <input type="text" class="form-control input-sm text-right"
                                       readonly id="total_amount" value="0" >
                            </div>
                        </div>
                    </div>
                    <br>
                </div>
          </div>
        </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.slim.js" integrity="sha512-HNbo1d4BaJjXh+/e6q4enTyezg5wiXvY3p/9Vzb20NIvkJghZxhzaXeffbdJuuZSxFhJP87ORPadwmU9aN3wSA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
       
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js"></script>

        <script type="text/javascript">

        $(document).ready(function(){

            //mask
            $('.amount').mask('000.000.000.000,00');

            //fff
            if(document.getElementById("val_1").value.length == 0)
                    {
                        document.getElementById("val_1").value = 0;
                    }
            var total_amount = function(){
                var sum=0;

                $('.amount').each(function(){
                   var num = $(this).val().replace(',','');
                   if (num != 0){
                   sum += parseFloat(num);

                }
            });
            $('#total_amount').val(sum.toFixed(2));
           }
            $('.amount').keyup(function(){
            total_amount();
           })
        });

        function set_value(obj){
         if (obj.value == ""){
                document.getElementById(obj.id).value = 0;
         }
         if ((obj.value[0] == 0) &&  (obj.value.length > 1 )){
                         var str = 'abcd';

                document.getElementById(obj.id).value = obj.value.substring(1);

         }


            console.log(obj.value.length);

        }
    </script>

  </body>
</html>

